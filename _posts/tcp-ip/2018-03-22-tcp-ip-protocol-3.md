---
layout: post
title:  "TCP/IP协议族详解（三）"
date:   2018-03-22
excerpt: "这个系列的文章主要详细了解TCP/IP协议族，本篇主要介绍ARP协议"
tag:
- TCP/IP
comments: true
---


本系列文章是**教程：**[TCP、IP协议族详解](http://study.163.com/course/courseMain.htm?courseId=1003343002)的学习笔记。

该系列大概分为下面几个部分：

- 1、TCP/IP协议4层结构以及每层的作用
- 2、IP协议详解
- 3、ARP协议和RARP协议详解
- 4、ICMP协议详解
- 5、TCP协议详解
- 6、UDP协议详解

本文主要介绍TCP/IP网络体系中网络层的ARP协议。

## 1、IP地址和MAC地址

一般，我们知道网络中的计算机，会有ip地址和mac地址（物理地址），那么这两个地址有什么区别和联系？

**逻辑地址**（IP地址）：它工作在网络层，全局唯一（全球范围内，公网IP地址是唯一的），用软件实现。

**物理地址**（MAC地址）：它工作在网络接口层，本地范围唯一（同一个通讯子网内，可以均指以太网），用硬件实现(路由器，计算机bios芯片)，一般为48位，一般在设备出厂是，就已经将Mac地址烧录进入了设备中。

简单说就是一个在子网里面，MAC地址可以在这个子网络里面定位到不同的网络设备，IP地址可以在整个因特网中定位到不同的子网。

注：MAC地址长度为6byte（48bit），前24位为厂家代码，后24位为序列号，例如我现在的mac地址为：FC-AA-14-95-BC-xx，可以通过Mac地址查询网址，知道我的网卡生产厂商为：**GIGA-BYTE TECHNOLOGY CO.,LTD**，也就是技嘉主板，因为网卡直接集成在了主板中。


## 2、IP协议和ARP协议的关系

首先，我们想象这样一个生活中的场景，在新生入学时，一堆学生分配到一个教室，大家彼此不知道名字（无重名），但是每个人都有座位号，此时，如果学生A想要和学生B交流，A知道B的座位号（假如为10号），但是他不知道B的名字，那么A就开始大喊：“我是A，我坐在2号，座位号为10号的同学，你叫什么名字？”，然后B听到后，发现找的就是我，就回复A说：“我是B，我坐在10号”，后面，两人都知道名字后，就成为了好基友。

套用上面的例子，可以把这个教室认为是一个通讯子网，把座位号认为是IP地址（座位号是可以随意变动的），把名字认为是MAC地址（名字在这个教室内是唯一的），如果通过座位号找到名字，就是ARP协议负责的内容。也就是说，ARP协议可以动态地在三层IP地址和二层MAC地址之间建立一种映射关系，用来获取目标IP地址所对应的MAC地址的。因为ARP是为IP协议提供服务的，所以，把ARP划分到了网络层。

所以，IP协议与ARP协议的关系就是，ARP是为IP协议提供服务，他比IP协议要稍微第一个层次。

![ARP协议与IP协议的关系](/images/posts/tcp-ip/arp-ip.png)


## 3、为什么有了IP地址还要使用Mac地址？

1. IP地址容易修改和变动，不能在网络上固定标示一台设备
2. Mac地址一般在出厂时被烧录到硬件中，不易修改，能在局域网中定位唯一一台设备
3. 从拓扑结构和分层上分析，IP地址属于网络层，主要功能是在广域网范围内路由寻址，选择最佳路由，而Mac地址是网络接口层要形成适合于在网络媒体上传输的数据帧。
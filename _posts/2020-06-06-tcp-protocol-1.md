---
title:  "彻底弄懂 TCP/IP 协议簇 —— 链路层"
date: 2020-06-06
tag:
- TCP/IP
---

## 链路层简介
数据链路层（也简称链路层）处于 TCP/IP 网络体系的第二层，它是物理层与网络层的桥梁。当电信号（也就是 bit 流）在传输介质（如光纤、双绞线等）传输时，不可避免会因为受到外界干扰（称之为噪声）而产生误差，而处于物理层之上的链路层通过采用差错检测与纠错、流量控制等手段，向网络层提供可靠的数据传输服务。

该层是对物理层传输原始比特流的功能的加强，将物理层提供的可能出错的物理连接改造成为逻辑上无差错的数据链路。

## 以太网
本文主要论述以太网，即`Ethernet II`，并不对其它局域网标准深入研究。

以太网是一套标准，最初的以太网称为“10 Mb/s以太网”，它的速率是 `10 Mb/s`，使用的物流地址是 48bit，也就是 6 byte。最后它被 IEEE 轻微修改为 802.3 标准。
需要注意的是，我们现在常用的 Ethernet II 标注和 802.3 标准的帧格式是有一点点区别的，这个会在接下来帧格式详细描述。

### CSMA/CD
以太网采用 **CSMA/CD**的分布式算法来协调一个局域网内的哪些主机可访问共享的传输介质（如网线）。

什么是 **CSMA/CD** 呢？它的意思是**带冲突检测的载波侦听多路访问**(**C**arrier **S**ense **M**ultiple **A**ccess with **C**ollision **D**etection),下图给出了简洁并准确的解释。
![总线型网CSMA/CD络拓扑](/assets/image/posts/2020-06-06-02.png?style=centerme)

>上图截取自[B站视频](https://www.bilibili.com/video/BV1Eb411F7nx)，该 BV 通俗易懂解释的了 CSMA/CD，是一个难得的好视频。另外也推荐该老师的[网络微课堂系列视频](https://www.bilibili.com/video/av64605483)。

那为什么要采用 CSMA/CD 呢？

首先我们回顾一下网络拓扑的发展轨迹，在最初网络采用的是**总线型**拓扑，多个主机共享一个网络总线，当网络中的一个主机要发送数据时，它需要知道共享的网络总线是否处于空闲，否则它往一个非空闲的总线发送数据时就会产生碰撞冲突。

这种总线型网络的结构如下图所示：
![总线型网络拓扑](/assets/image/posts/2020-06-06-01.png?style=centerme)

从上图我们可以看到，总线型网络中的有多个主机同时接入到总线上，且任一主机在发送数据时会独占总线，为了解决可能出现的冲突问题，就引出了 **CSMA**，也就是“载波侦听多路访问”部分。你可以把它想象这样：

“有一条只能容纳一个人通过的巷子，巷子里的住户想要通过这条巷子时，需要知道是否有人正在这个巷子里行走，若巷子有人则其他住户不能出门，否则就会出现两个人碰头的情况；若没有人，则住户可以出门。”


### 以太网帧格式

### MTU


## 参考
1. [Etherenet Frame](https://en.wikipedia.org/wiki/Ethernet_frame)。

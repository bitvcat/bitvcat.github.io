---
layout: post
title: 读书笔记 —— 《程序员的自我修养-链接、装载与库》
excerpt: "《程序员的自我修养-链接、装载与库》的学习笔记。"
date: 2018-09-27 17:05:00
tag: [读书笔记]
comments: true

---

**目录**

* TOC
{:toc}

这本书大概可以分为三个比较重要的部分：

1. 静态链接
2. 装载和动态链接
3. 库与运行库

## 第一章

本章主要是简介。

1. 介绍了计算机硬件架构的发展，比如：总线的变化、南北桥芯片、单核CPU到多核CPU的发展。

2. 介绍了软件体系结构，比如：软件系统的分层、接口、API等等。

	- 接口（interface），即中间层，接口的下层为接口提供者，接口的上层为接口的使用者。每个中间层是对它下层的包装和扩展。
	- 应用程序编程接口（Application Programming Interface），简称API，应用程序的接口提供者是**运行库**，比如Linux的Glibc库提供POSIX的API。
	- 系统调用接口（System Call Interface），它的使用者就是运行库，提供者是操作系统。
	- 硬件接口，操作系统内核与硬件之间的中间层。

	一个大概的流程：应用程序（例如浏览器）--(API)--> 运行库 --(系统调用)--> 操作系统内核 --(硬件接口)--> 硬件

3. 介绍了操作系统

我们目前使用最多的是**多任务系统**，操作系统接管所有的硬件资源，并且系统本身运行在一个收硬件保护的级别。
所有的应用程序都是以**进程（process）**运行（级别低于操作系统），有自己独立的地址空间（这里涉及到虚拟内存地址）。

关于内存地址空间，分为：虚拟地址空间（Virtual Address Space）和 物理地址空间（Phy	sical Address Space）。
目前，使用分页（Paging）的方法来划分并管理虚拟地址空间（通常一页为4KB）。

把在虚拟内存中的页称为虚拟页（Virtual Page），在物理内存中的称为物理页(Physical Page)，在磁盘中的页称为磁盘页(Disk Page)。

注意：虚拟存储的实现需要依靠硬件来实现，几乎所有的硬件都采用一个叫MMU(Memory Management Unit)的部件来进行页映射。MMU一般集成在CPU内部。

4. 介绍了线程，包括：线程的概念、线程调度、线程安全、用户线程和内核线程之间的映射关系等。

线程：被称为轻量级进程（LightWeight Process），是**程序流执行的最小单元**，一个标准的线程包括：线程ID、当前指令指针PC、寄存器集合、堆栈。

一个进程内的所有线程共享进程的内存空间（包括代码段、数据段、堆等）以及一些进程级的资源（如打开的文件和信号）。

进程和线程的关系如下图：

![进程和线程的关系](/images/posts/cxydzwxy/process-thread.png)

线程的权限如下图：
![线程的权限](/images/posts/cxydzwxy/thread-priv.png)

	- 线程调度